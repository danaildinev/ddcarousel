"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a
/*! DDCarousel 1.0.2 by Danail Dinev 2019 | License: https://github.com/danaildinev/ddcarousel/blob/master/LICENSE */}var DDCarousel=function(){function a(b){var c=b.container,d=void 0===c?".ddcarousel":c,e=b.nav,f=void 0!==e&&e,g=b.dots,h=void 0===g||g,i=b.autoHeight,j=void 0!==i&&i,k=b.items,l=void 0===k?1:k,m=b.responsive,n=void 0!==m&&m,o=b.touch,p=void 0===o||o,q=b.touchMouse,r=void 0===q||q,s=b.centerSlide,t=void 0!==s&&s,u=b.touchSwipeThreshold,v=void 0===u?60:u,w=b.touchMaxSlideDist,x=void 0===w?500:w,y=b.swipeSmooth,z=void 0===y?0:y,A=b.slideChangeDuration,B=void 0===A?.5:A,C=b.labelNavPrev,D=void 0===C?"< Prev":C,E=b.labelNavNext,F=void 0===E?"Next >":E;_classCallCheck(this,a),_defineProperty(this,"appName","DDCarousel"),_defineProperty(this,"containerName",null),_defineProperty(this,"container",null),_defineProperty(this,"stage",null),_defineProperty(this,"currentSlide",0),_defineProperty(this,"currentPage",0),_defineProperty(this,"currentTranslate",0),_defineProperty(this,"slideDiff",0),_defineProperty(this,"slidesHeights",[]),_defineProperty(this,"triggers",[]),_defineProperty(this,"activeSlides",[]),_defineProperty(this,"totalPages",[]),_defineProperty(this,"isDragging",!1),_defineProperty(this,"init",!1),_defineProperty(this,"cCont","ddcarousel-container"),_defineProperty(this,"cStage","ddcarousel-stage"),_defineProperty(this,"cNav","ddcarousel-nav"),_defineProperty(this,"cItem","ddcarousel-item"),_defineProperty(this,"cResp","ddcarousel-responsive"),_defineProperty(this,"cDSlide","data-slide"),_defineProperty(this,"cContDots","ddcarousel-dots"),_defineProperty(this,"cDot","ddcarousel-dot"),_defineProperty(this,"cPrev","ddcarousel-prev"),_defineProperty(this,"cNext","ddcarousel-next"),this.triggerHandler("initializing"),this.checkContainer(d)&&(this.containerName=d,this.autoHeight=j,this.itemsPerPage=l,this.responsive=n,this.nav=f,this.dots=h,this.touch=p,this.touchMouse=r,this.touchSwipeThreshold=v,this.touchMaxSlideDist=x,this.swipeSmooth=z,this.slideChangeDuration=B,this.labelNavPrev=D,this.labelNavNext=F,1<l&&l%2&&t?(this.centeredSlideOffset=Math.floor(l/2),this.centerSlide=!0):(this.centeredSlideOffset=0,this.centerSlide=!1),this.createStage(),this.setActiveSlides(),this.calculateStage(),this.createNav(),this.createDots(),this.attachEvents(),this.setActiveDot(),this.updateSlide(),this.nav&&this.refreshNav())}return _createClass(a,[{key:"on",value:function(a,b){this.triggers[a]||(this.triggers[a]=[]),this.triggers[a].push(b)}},{key:"triggerHandler",value:function(a,b){if(this.triggers[a])for(var c in this.triggers[a])this.triggers[a][c](b)}},{key:"checkContainer",value:function(a){var b=a.substring(1);return"#"==a.substring(0,1)?null==document.getElementById(b)?(console.error("".concat(this.appName,": Invalid container ID!")),!1):(this.container=document.getElementById(containerNameClear),!0):"."==a.substring(0,1)?null==document.getElementsByClassName(b)[0]?(console.error("".concat(this.appName,": Invalid container class!")),!1):(this.container=document.getElementsByClassName(b)[0],!0):(console.error("".concat(this.appName,": Invalid container!")),!1)}},{key:"createStage",value:function(){var a=0,b=document.createElement("div"),c=document.createElement("div");for(b.classList.add(this.cCont),c.classList.add(this.cStage),this.slidesSource=document.querySelectorAll("".concat(this.containerName," > div")),this.container.appendChild(b),b.appendChild(c),this.stage=document.querySelector("".concat(this.containerName," .").concat(this.cStage)),this.responsive&&this.container.classList.add(this.cResp),a=0;a<this.slidesSource.length;a++){var d=document.createElement("div");d.classList.add(this.cItem),d.setAttribute(this.cDSlide,a),d.appendChild(this.slidesSource[a]),c.appendChild(d)}this.slides=document.querySelectorAll("".concat(this.containerName," .").concat(this.cItem)),this.totalPages=this.centerSlide?this.slides.length:Math.ceil(this.slides.length/this.itemsPerPage)-1,this.slideDiff=this.slides.length-this.itemsPerPage,this.centeredSlideDiff=this.centerSlide?this.slideDiff+this.itemsPerPage:0}},{key:"calculateStage",value:function(){var a,b=this.slides[0].style.width,c=parseInt(window.getComputedStyle(this.container).width);for(this.slidesHeights=[],a=0;a<this.slides.length;a++)this.slides[a].style.width=null==this.itemsPerPage?c+"px":c/this.itemsPerPage+"px",this.slidesHeights.push(document.querySelector("".concat(this.containerName," [").concat(this.cDSlide,'="').concat(a,'"] > div')).scrollHeight);this.autoHeight&&this.calculateContainerHeight(this.currentPage),b!=this.slides[0].style.width&&this.triggerHandler("resized"),!this.init&&this.slides.length==this.slidesSource.length&&0<document.querySelectorAll("".concat(this.containerName," .").concat(this.cStage," [").concat(this.cDSlide,"]")).length&&(this.triggerHandler("initialized"),this.init=!0)}},{key:"createNav",value:function(){if(this.nav){var a=document.createElement("div"),b=document.createElement("button"),c=document.createElement("button");a.classList.add(this.cNav),b.classList.add(this.cPrev),b.innerHTML=this.labelNavPrev,c.classList.add(this.cNext),c.innerHTML=this.labelNavNext,a.appendChild(b),a.appendChild(c),this.container.appendChild(a),this.navPrevBtn=document.querySelector("".concat(this.containerName," .").concat(this.cPrev)),this.navNextBtn=document.querySelector("".concat(this.containerName," .").concat(this.cNext))}}},{key:"createDots",value:function(){var a=this;if(this.dots){var b,c,d,e=document.createElement("div");for(e.classList.add(this.cContDots),d=1<this.itemsPerPage?this.centerSlide?this.centeredSlideDiff:this.totalPages+1:this.slides.length,b=0;b<d;b++)(c=document.createElement("button")).classList.add(this.cDot),c.setAttribute(this.cDSlide,b),c.addEventListener("click",function(b){return a.goToPage(parseInt(b.target.getAttribute(a.cDSlide)))}),e.appendChild(c);this.container.appendChild(e)}}},{key:"attachEvents",value:function(){var a=this;this.nav&&(this.navPrevBtn.addEventListener("click",function(){return a.prevPage()}),this.navNextBtn.addEventListener("click",function(){return a.nextPage()}),this.on("changed",function(){a.refreshNav()})),this.responsive&&window.addEventListener("resize",function(){a.calculateStage(),a.scrollToSlide(a.getCurrentSlideDom())});var b=this.whichTransitionEvent();b&&this.stage.addEventListener(b,function(){a.triggerHandler("traisitioned")}),this.attachTouchEvents()}},{key:"attachTouchEvents",value:function(){var b,c,d,f,g,h,a=this,i=[],j=[],k=[];this.touch&&(i.push("touchstart"),j.push("touchmove"),k.push("touchend")),this.touchMouse&&(i.push("mousedown"),j.push("mousemove"),k.push("mouseup")),i.forEach(function(d){window.addEventListener(d,function(d){d.target==a.stage&&(a.isDragging=!0,c="mousedown"==d.type||"mousedown"==d.type&&a.touchMouse?d.clientX:d.targetTouches[0].clientX,b="mousedown"==d.type||"mousedown"==d.type&&a.touchMouse?d.clientX+-a.currentTranslate:d.targetTouches[0].clientX+-a.currentTranslate,f=a.currentTranslate,h=!1,a.triggerHandler("drag"))},{passive:!0})}),k.forEach(function(b){window.addEventListener(b,function(){a.isDragging&&(a.triggerHandler("dragged"),g>=a.touchSwipeThreshold&&!h?f<d?a.prevPage():a.nextPage():a.scrollToPos(f),a.stage.style.transitionDuration=a.slideChangeDuration+"s",a.isDragging=!1)})}),j.forEach(function(e){window.addEventListener(e,function(f){var e;a.isDragging&&("mousemove"==f.type&&a.touchMouse?e=f.clientX:"touchmove"==f.type&&(e=f.targetTouches[0].pageX),a.stage.style.transitionDuration=a.swipeSmooth+"s",g=Math.abs(e-c),d=e-b,g<=a.touchMaxSlideDist?(a.triggerHandler("dragging"),a.scrollToPos(d)):(h=!0,d=e-b))},{passive:!0})})}},{key:"refreshNav",value:function(){0==this.currentPage?(this.navPrevBtn.classList.add("inactive"),this.navNextBtn.classList.remove("inactive")):(this.centerSlide?this.getActiveSlides()==this.getTotalSlides():this.currentPage==this.getTotalPages())?(this.navPrevBtn.classList.remove("inactive"),this.navNextBtn.classList.add("inactive")):(this.navPrevBtn.classList.remove("inactive"),this.navNextBtn.classList.remove("inactive"))}},{key:"scrollToSlide",value:function(a){this.currentTranslate=-this.getSlideDomSize(a),this.scrollToPos(this.currentTranslate)}},{key:"scrollToPos",value:function(a){var b=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),c="translateX(".concat(a,"px)");b?this.stage.style.webkitTransform=c:this.stage.style.transform=c}},{key:"calculateContainerHeight",value:function(){if(1==this.itemsPerPage)this.container.style.height=this.slidesHeights[this.currentPage]+"px";else{var a,b=[];for(a=this.getActiveSlides()[0];a<=this.getActiveSlides()[this.getActiveSlides().length-1];a++)b.push(this.slidesHeights[a]);this.container.style.height=Math.max.apply(Math,b)+"px"}}},{key:"changePage",value:function(a){var b=this.currentPage;this.stage.style.transitionDuration=this.slideChangeDuration+"s","prev"==a?(this.currentSlide=this.centerSlide?this.currentSlide-1:this.currentSlide-this.itemsPerPage,this.currentPage--):"next"==a?(this.currentSlide=this.centerSlide?this.currentSlide+1:this.currentSlide+this.itemsPerPage,this.currentPage++):Number.isInteger(a)&&(this.currentSlide=a),"prev"==a&&this.currentSlide<0?this.centerSlide?(this.currentSlide--,this.currentPage--):(this.currentSlide=0,this.currentPage=0):"next"==a&&this.currentSlide+this.itemsPerPage>=this.slides.length&&(this.centerSlide?this.currentSlide>this.slides.length&&(this.currentSlide++,this.currentPage++):(this.currentSlide=this.slides.length-this.itemsPerPage,this.currentPage=this.totalPages)),this.setActiveSlides(),this.setActiveDot(),this.updateSlide(),this.autoHeight&&this.calculateContainerHeight(this.getCurrentSlideDom()),b!=this.currentPage&&this.triggerHandler("changed")}},{key:"updateSlide",value:function(){if(this.centerSlide){var a=-this.getSlideDomSize(this.getCurrentSlideDom())- -this.getCurrentSlideDom().getBoundingClientRect().width*this.centeredSlideOffset;this.currentTranslate=a,this.scrollToPos(a)}else this.scrollToSlide(this.getCurrentSlideDom())}},{key:"setActiveSlides",value:function(){var a=this;if(this.activeSlides.forEach(function(b){document.querySelector("".concat(a.containerName," [").concat(a.cDSlide,'="').concat(b,'"]')).classList.remove("active")}),this.activeSlides=[],this.centerSlide)this.activeSlides.push(this.currentSlide);else for(var b=this.currentSlide;b<this.itemsPerPage+this.currentSlide;b++)b<this.slides.length&&this.activeSlides.push(b);this.activeSlides.forEach(function(b){document.querySelector("".concat(a.containerName," [").concat(a.cDSlide,'="').concat(b,'"]')).classList.add("active")})}},{key:"setActiveDot",value:function(){if(this.dots){var b=document.querySelector("".concat(this.containerName," .").concat(this.cDot,"[").concat(this.cDSlide,"].active"));null!=b&&b.classList.remove("active"),document.querySelector("".concat(this.containerName," .").concat(this.cDot,"[").concat(this.cDSlide,'="').concat(this.currentPage,'"]')).classList.add("active")}}},{key:"nextPage",value:function(){this.changePage("next")}},{key:"prevPage",value:function(){this.changePage("prev")}},{key:"goToPage",value:function(a){0<=a&&a<=this.totalPages&&this.changePage(a)}},{key:"getCurrentSlideDom",value:function(){return document.querySelector("".concat(this.containerName," [").concat(this.cDSlide,"].active"))}},{key:"getCurrentPage",value:function(){return document.querySelector("".concat(this.containerName," [").concat(this.cDSlide,'="').concat(this.currentPage,'"].active')).getAttribute(this.cDSlide)}},{key:"getTotalSlides",value:function(){return this.slides.length-1}},{key:"getSlideDom",value:function(a){return document.querySelector("".concat(this.containerName," .").concat(this.cItem,"[").concat(this.cDSlide,'="').concat(a,'"]'))}},{key:"getSlideDomSize",value:function(a){return a.getBoundingClientRect().left-this.stage.getBoundingClientRect().left}},{key:"getActiveSlides",value:function(){return this.activeSlides}},{key:"getTotalPages",value:function(){return this.totalPages}},{key:"whichTransitionEvent",value:function(){var a,b=document.createElement("fakeelement"),c={transition:"transitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(a in c)if(void 0!==b.style[a])return c[a]}}]),a}();Number.isInteger=Number.isInteger||function(a){return"number"==typeof a&&isFinite(a)&&Math.floor(a)===a},"classList"in document.documentElement||!Object.defineProperty||"undefined"==typeof HTMLElement||Object.defineProperty(HTMLElement.prototype,"classList",{get:function(){function a(a){return function(c){var d=b.className.split(/\s+/),e=d.indexOf(c);a(d,e,c),b.className=d.join(" ")}}var b=this,c={add:a(function(a,b,c){~b||a.push(c)}),remove:a(function(a,b){~b&&a.splice(b,1)}),contains:function(a){return!!~b.className.split(/\s+/).indexOf(a)},item:function(a){return b.className.split(/\s+/)[a]||null}};return Object.defineProperty(c,"length",{get:function(){return b.className.split(/\s+/).length}}),c}});