"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a
/*! DDCarousel 1.2 by Danail Dinev 2019 | License: https://github.com/danaildinev/ddcarousel/blob/master/LICENSE */}var DDCarousel=function(){function a(b){_classCallCheck(this,a),this.appName="DDCarousel",this.cCont="ddcarousel-container",this.cStage="ddcarousel-stage",this.cNav="ddcarousel-nav",this.cItem="ddcarousel-item",this.cFullW="ddcarousel-fullwidth",this.cDots="ddcarousel-dots",this.cDot="ddcarousel-dot",this.cPrev="ddcarousel-prev",this.cNext="ddcarousel-next",this.cVert="ddcarousel-vertical",this.cUrl="ddcarousel-urls",this.dSlide="data-slide",this.dId="data-id",this.dTitle="data-title",this.currentPage=0,this.triggers=["onInitialize","onInitialized","onDrag","onDragging","onDragged","onChanged","onTransitionend","onResized"],this.configOrig=b,this.setDefaults(),this.checkContainer(this.config.container)&&(this.trigger("onInitialize",{container:this.container,event:"onInitialize"}),this.createStage(),this.calculateStage(),this.createNav(),this.createDots(),this.createUrls(),this.setActiveSlides(),this.changePage(0<this.config.startPage?this.config.startPage:0,!1),this.refresh(),this.trigger("onInitialized"),this.attachEvents(),this.updateSlide())}return _createClass(a,[{key:"setDefaults",value:function(argument_0){var a=this,b=0<arguments.length&&void 0!==argument_0?argument_0:this.configOrig,c={container:"."+this.appName.toLowerCase(),nav:!1,dots:!0,autoHeight:!1,fullWidth:!1,startPage:0,items:1,itemPerPage:!1,vertical:!1,urlNav:!1,responsive:[],autoplay:!1,autoplaySpeed:1e3,autoplayPauseHover:!1,touchDrag:!0,mouseDrag:!0,centerSlide:!1,touchSwipeThreshold:60,touchMaxSlideDist:500,resizeRefresh:200,swipeSmooth:0,slideChangeDuration:.5,callbacks:!1,labelNavPrev:"< Prev",labelNavNext:"Next >"};this.triggers.forEach(function(b){c[b]=function(){},a.on(b,function(c){a.config[b].call(a,null==c?a.callback(b):c)})}),this.configResp=[],void 0!==b.responsive&&(this.configResp=b.responsive),this.config=c,this.updateSettings(b)}},{key:"updateSettings",value:function(a){for(var b in a)this.config[b]=a[b]}},{key:"callback",value:function(a){return this.config.callbacks?new Object({container:this.container,event:a,currentSlides:this.activeSlides,currentPage:this.currentPage,totalSlides:this.getTotalSlides(),totalPages:this.totalPages}):void 0}},{key:"on",value:function(a,b){this.triggers[a]||(this.triggers[a]=[]),this.triggers[a].push(b)}},{key:"trigger",value:function(a,b){if(this.triggers[a])for(var c in this.triggers[a])this.triggers[a][c](b)}},{key:"checkContainer",value:function(a){var b=document.querySelector(a);return null==b?(console.error("".concat(this.appName,": Invalid container!")),!1):(this.container=b,this.containerName=a,!0)}},{key:"createStage",value:function(){var a=this.newEl("div"),b=this.newEl("div"),c=this.getEl("> div",!0);a.classList.add(this.cCont),b.classList.add(this.cStage),this.container.appendChild(a),a.appendChild(b),this.stage=this.getEl(".".concat(this.cStage));for(var d=0;d<c.length;d++){var e=this.newEl("div");e.classList.add(this.cItem),e.setAttribute(this.dSlide,d),e.appendChild(c[d]),this.config.urlNav&&c[d].hasAttribute(this.dId)&&c[d].hasAttribute(this.dTitle)&&(e.setAttribute(this.dId,c[d].getAttribute(this.dId)),e.setAttribute(this.dTitle,c[d].getAttribute(this.dTitle))),b.appendChild(e)}this.slides=this.getEl(".".concat(this.cItem),!0)}},{key:"calculateStage",value:function(){var a,b=this.slides[0].style.width,c=window.getComputedStyle(this.container),d=parseInt(c.width),e=parseInt(c.height),f=this.container.classList;this.config.fullWidth?f.add(this.cFullW):f.remove(this.cFullW),this.config.vertical?f.add(this.cVert):f.remove(this.cVert),a=this.config.centerSlide?this.slides.length-1:this.config.itemPerPage?this.slides.length-this.config.items:Math.ceil(this.slides.length/this.config.items)-1,this.totalPages=a,this.slidesHeights=[];for(var g=0;g<this.slides.length;g++)null==this.config.items&&this.config.vertical?this.slides[g].style.width=d+"px":this.config.vertical?this.slides[g].style.height=e/this.config.items+"px":this.config.vertical||(this.slides[g].style.width=d/this.config.items+"px"),this.slidesHeights.push(this.getEl("[".concat(this.dSlide,'="').concat(g,'"] > div')).scrollHeight);this.config.vertical||(this.stage.style.width=d*this.slides.length+"px"),this.config.autoHeight&&(this.setActiveSlides(),this.calculateContainerHeight(this.currentPage)),b!=this.slides[0].style.width&&this.trigger("onResized")}},{key:"createNav",value:function(){var a=this,b=this.getEl(".".concat(this.cNav));if(this.config.nav){var c=this.newEl("div"),d=this.newEl("button"),e=this.newEl("button");b&&b.remove(),c.classList.add(this.cNav),d.classList.add(this.cPrev),d.innerHTML=this.config.labelNavPrev,e.classList.add(this.cNext),e.innerHTML=this.config.labelNavNext,c.appendChild(d),c.appendChild(e),this.container.appendChild(c),this.navPrevBtn=this.getEl(".".concat(this.cPrev)),this.navNextBtn=this.getEl(".".concat(this.cNext)),this.navPrevBtn.addEventListener("click",function(){return a.prevPage()}),this.navNextBtn.addEventListener("click",function(){return a.nextPage()})}else null!=b&&b.remove()}},{key:"createDots",value:function(){var a=this,b=this.getEl(".".concat(this.cDots));if(this.config.dots){var c,d=this.newEl("div");b&&b.remove(),d.classList.add(this.cDots),c=1<this.config.items?this.config.centerSlide?this.slides.length:this.totalPages+1:this.slides.length;for(var e=0;e<c;e++){var f=this.newEl("button");f.classList.add(this.cDot),f.setAttribute(this.dSlide,e),f.addEventListener("click",function(b){return a.changePage(parseInt(b.target.getAttribute(a.dSlide)))}),d.appendChild(f)}this.container.appendChild(d)}else null!=b&&b.remove()}},{key:"createUrls",value:function(){var b=this;if(this.urlsDiv=this.getEl(".".concat(this.cUrl)),this.config.urlNav){var c=this.newEl("div"),d=this.newEl("ul");this.urlsDiv&&this.urlsDiv.remove(),c.classList.add(this.cUrl),this.slides.forEach(function(c){if(c.hasAttribute(b.dId)&&c.hasAttribute(b.dTitle)){var e=b.newEl("li"),f=b.newEl("a");f.href="#"+c.getAttribute(b.dId),f.innerHTML=c.getAttribute(b.dTitle),e.appendChild(f),d.appendChild(e)}}),c.appendChild(d),this.container.appendChild(c),this.getEl(".".concat(this.cUrl," a"),!0).forEach(function(a){a.addEventListener("click",function(c){b.goToUrl(a.getAttribute("href").substring(1))})})}else null!=this.urlsDiv&&this.urlsDiv.remove()}},{key:"attachEvents",value:function(){var b,a=this;this.setDraggingEvents(),window.addEventListener("resize",function(){a.calculateStage(),b||(a.refresh(),b=!0,setTimeout(function(){b=!1},a.config.resizeRefresh))}),this.stage.addEventListener(this.whichTransitionEvent(),function(){a.trigger("onTransitionend")});var c=["mouseover","touchstart"],d=["mouseleave","touchend"];this.config.autoplayPauseHover&&this.config.autoplay?(c.forEach(function(b){return a.stage.addEventListener(b,a.autoplayStop.bind(a))}),d.forEach(function(b){return a.stage.addEventListener(b,a.autoplayStart.bind(a))})):(c.forEach(function(b){return a.stage.removeEventListener(b,a.autoplayStop.bind(a))}),d.forEach(function(b){return a.stage.removeEventListener(b,a.autoplayStart.bind(a))}))}},{key:"refresh",value:function(){for(var a=0;a<Object.keys(this.configResp).length;a++){if(document.body.clientWidth<=Object.keys(this.configResp)[a]){this.updateSettings(Object.values(this.configResp)[a]);break}this.setDefaults()}this.calculateStage(),this.createNav(),this.createDots(),this.setActiveDot(),this.createUrls(),this.autoplayStop(),this.config.autoplay&&null==this.ap&&this.autoplayStart(),this.updateSlide(),this.refreshNav()}},{key:"setDraggingEvents",value:function(){var a=this,e=document.all&&window.atob?this.stage:window;["touchstart","mousedown"].forEach(function(b){return e.addEventListener(b,function(b){return a.dragStart(b)},{passive:!0})}),["touchmove","mousemove"].forEach(function(b){return window.addEventListener(b,function(b){return a.dragMove(b)},{passive:!0})}),["touchend","mouseup"].forEach(function(b){return window.addEventListener(b,function(){return a.dragEnd()})})}},{key:"dragMove",value:function(a){if(this.isDragging){var b=this.getInput(a,"mousemove","touchmove");this.stage.style.transitionDuration=this.config.swipeSmooth+"s",this.swipeDistance=Math.abs(b-this.touchStartRaw),this.currentTouch=b-this.touchStart,this.swipeDistance<=this.config.touchMaxSlideDist?(this.trigger("onDragging"),this.scrollToPos(this.currentTouch)):(this.dontChange=!0,this.currentTouch=b-this.touchStart)}}},{key:"getInput",value:function(a,b,c){return a.type==b&&this.config.mouseDrag?this.config.vertical?a.clientY:a.pageX:a.type==c&&this.config.touchDrag?this.config.vertical?a.targetTouches[0].pageY:a.targetTouches[0].pageX:void 0}},{key:"dragStart",value:function(a){if(a.target==this.stage){var b=this.getInput(a,"mousedown","touchstart");void 0!==b&&a.target==this.stage&&(this.isDragging=!0,this.touchStartRaw=b,this.touchStart=this.touchStartRaw+-this.currentTranslate,this.origPosition=this.currentTranslate,this.dontChange=!1,this.trigger("onDrag"))}}},{key:"dragEnd",value:function(){this.isDragging&&(this.trigger("onDragged"),this.swipeDistance>=this.config.touchSwipeThreshold&&!this.dontChange?this.currentTouch>this.origPosition?this.prevPage():this.nextPage():this.scrollToPos(this.origPosition),this.stage.style.transitionDuration=this.config.slideChangeDuration+"s",this.isDragging=!1)}},{key:"refreshNav",value:function(){if(this.config.nav){var a="inactive";0==this.currentPage?(this.navPrevBtn.classList.add(a),this.navNextBtn.classList.remove(a)):this.currentPage==this.totalPages?(this.navPrevBtn.classList.remove(a),this.navNextBtn.classList.add(a)):(this.navPrevBtn.classList.remove(a),this.navNextBtn.classList.remove(a))}}},{key:"scrollToSlide",value:function(a){this.currentTranslate=-this.getSlidePos(a),this.scrollToPos(this.currentTranslate)}},{key:"scrollToPos",value:function(a){var b=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),c=this.config.vertical?"translateY(".concat(a,"px)"):"translateX(".concat(a,"px)");b?this.stage.style.webkitTransform=c:this.stage.style.transform=c}},{key:"calculateContainerHeight",value:function(){if(1==this.config.items)this.container.style.height=this.slidesHeights[this.currentPage]+"px";else{for(var a=[],b=this.activeSlides[0];b<=this.activeSlides[this.activeSlides.length-1];b++)a.push(this.slidesHeights[b]);this.container.style.height=Math.max.apply(Math,a)+"px"}}},{key:"changePage",value:function(a,argument_1){var b=this,c=!(1<arguments.length&&void 0!==argument_1)||argument_1,d=this.currentPage;c?this.stage.style.transitionDuration=this.config.slideChangeDuration+"s":(this.stage.style.transitionDuration="0s",this.stage.addEventListener(this.whichTransitionEvent(),function(){b.stage.style.transitionDuration=b.config.slideChangeDuration+"0s"})),"prev"==a?0!=this.currentPage&&this.currentPage--:"next"==a?this.currentPage<this.totalPages&&this.currentPage++:Number.isInteger(a)&&a<=this.totalPages&&(this.currentPage=a),this.setActiveSlides(),this.setActiveDot(),this.updateSlide(),this.refreshNav(),this.config.autoHeight&&this.calculateContainerHeight(this.getCurrentSlideDom()),d!=this.currentPage&&this.trigger("onChanged")}},{key:"goToUrl",value:function(a,argument_1){var b=!(1<arguments.length&&void 0!==argument_1)||argument_1,c=this.getEl(".".concat(this.cItem,"[").concat(this.dId,'="').concat(a,'"]'));this.changePage(parseInt(c.getAttribute(this.dSlide)),b)}},{key:"updateSlide",value:function(){if(this.config.centerSlide){var a=-this.getSlidePos(this.getCurrentSlideDom())- -parseInt(this.getSlideStyle().width)*Math.floor(this.config.items/2);this.currentTranslate=a,this.scrollToPos(a)}else this.scrollToSlide(this.getCurrentSlideDom())}},{key:"setActiveSlides",value:function(){var a=this;if(null!=this.activeSlides&&this.activeSlides.forEach(function(b){a.getEl("[".concat(a.dSlide,'="').concat(b,'"]')).classList.remove("active")}),this.activeSlides=[],this.config.centerSlide)this.activeSlides.push(this.currentPage);else if(this.config.itemPerPage)for(var b=this.currentPage;b<this.currentPage+this.config.items;b++)this.activeSlides.push(b);else if(this.getSlideIndexForPage()+this.config.items>this.getTotalSlides())for(b=this.slides.length-this.config.items;b<this.getTotalSlides();b++)this.activeSlides.push(b);else for(b=this.getSlideIndexForPage();b<this.getSlideIndexForPage()+this.config.items;b++)b<this.slides.length&&this.activeSlides.push(b);this.activeSlides.forEach(function(b){a.getEl("[".concat(a.dSlide,'="').concat(b,'"]')).classList.add("active")})}},{key:"setActiveDot",value:function(){var b="active";if(this.config.dots){var c=this.getEl(".".concat(this.cDot,"[").concat(this.dSlide,"].")+b);null!=c&&c.classList.remove(b),this.getEl(".".concat(this.cDot,"[").concat(this.dSlide,'="').concat(this.currentPage,'"]')).classList.add(b)}}},{key:"autoplayStart",value:function(){var a=this;null==this.ap&&(this.ap=setInterval(function(){return a.nextPage()},this.config.autoplaySpeed))}},{key:"autoplayStop",value:function(){0<this.ap&&(clearTimeout(this.ap),this.ap=void 0)}},{key:"nextPage",value:function(){this.changePage("next")}},{key:"prevPage",value:function(){this.changePage("prev")}},{key:"getSlideIndexForPage",value:function(){return this.currentPage*this.config.items}},{key:"getCurrentSlideDom",value:function(){return this.getEl("[".concat(this.dSlide,"].active"))}},{key:"getCurrentPage",value:function(){return this.currentPage}},{key:"getTotalSlides",value:function(){return this.slides.length}},{key:"getSlidePos",value:function(a){return this.config.vertical?a.getBoundingClientRect().top-this.stage.getBoundingClientRect().top:a.getBoundingClientRect().left-this.stage.getBoundingClientRect().left}},{key:"getTotalPages",value:function(){return this.totalPages}},{key:"getSlideStyle",value:function(){return this.slides[0].style}},{key:"whichTransitionEvent",value:function(){var a=this.newEl("tr"),b={transition:"transitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var c in b)if(void 0!==a.style[c])return b[c]}},{key:"getEl",value:function(a,b){var c="".concat(this.containerName," ").concat(a);return b?document.querySelectorAll(c):document.querySelector(c)}},{key:"newEl",value:function(a){return document.createElement(a)}}]),a}();Number.isInteger=Number.isInteger||function(a){return"number"==typeof a&&isFinite(a)&&Math.floor(a)===a},window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach);