"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}
/*! DDCarousel 1.0 by Danail Dinev 2019 | License: https://github.com/danaildinev/ddcarousel/blob/master/LICENSE */var DDCarousel=function(){function w(e){var t=e.container,i=void 0===t?".ddcarousel":t,s=e.nav,n=void 0!==s&&s,a=e.dots,r=void 0===a||a,c=e.autoHeight,o=void 0!==c&&c,l=e.items,d=void 0===l?1:l,h=e.responsive,u=void 0!==h&&h,v=e.touch,g=void 0===v||v,m=e.touchMouse,p=void 0===m||m,f=e.touchSwipeThreshold,S=void 0===f?60:f,y=e.touchMaxSlideDist,P=void 0===y?500:y,N=e.swipeSmooth,C=void 0===N?.1:N,D=e.slideChangeDuration,L=void 0===D?.3:D,k=e.labelNavPrev,b=void 0===k?"< Prev":k,E=e.labelNavNext,x=void 0===E?"Next >":E;_classCallCheck(this,w),_defineProperty(this,"appName","DDCarousel"),_defineProperty(this,"containerName",null),_defineProperty(this,"container",null),_defineProperty(this,"stage",null),_defineProperty(this,"currentSlide",0),_defineProperty(this,"currentTranslate",0),_defineProperty(this,"slideDiff",0),_defineProperty(this,"slidesHeights",[]),_defineProperty(this,"triggers",[]),this.checkContainer(i)&&(this.containerName=i,this.autoHeight=o,this.itemsPerPage=d,this.responsive=u,this.nav=n,this.dots=r,this.touch=g,this.touchMouse=p,this.touchSwipeThreshold=S,this.touchMaxSlideDist=P,this.swipeSmooth=C,this.slideChangeDuration=L,this.labelNavPrev=b,this.labelNavNext=x,this.createStage(),this.calculateStage(),this.createNav(),this.createDots(),this.attachEvents(),this.changeSlide(this.changeSlide),this.nav&&this.refreshNav())}return _createClass(w,[{key:"on",value:function(e,t){this.triggers[e]||(this.triggers[e]=[]),this.triggers[e].push(t)}},{key:"triggerHandler",value:function(e,t){if(this.triggers[e])for(var i in this.triggers[e])this.triggers[e][i](t)}},{key:"checkContainer",value:function(e){var t=e.substring(1);return"#"==e.substring(0,1)?null==document.getElementById(t)?(console.log("".concat(this.appName,": Invalid container ID!")),!1):(this.container=document.getElementById(containerNameClear),!0):"."==e.substring(0,1)?null==document.getElementsByClassName(t)[0]?(console.log("".concat(this.appName,": Invalid container class!")),!1):(this.container=document.getElementsByClassName(t)[0],!0):(console.log("".concat(this.appName,": Invalid container!")),!1)}},{key:"createStage",value:function(){var e=0,t=document.createElement("div"),i=document.createElement("div");for(t.classList.add("ddcarousel-container"),i.classList.add("ddcarousel-stage"),this.slidesSource=document.querySelectorAll("".concat(this.containerName," > div")),this.container.appendChild(t),t.appendChild(i),this.stage=document.querySelector("".concat(this.containerName," .").concat(i.classList[0])),this.responsive&&this.container.classList.add("ddcarousel-responsive"),e=0;e<this.slidesSource.length;e++){var s=document.createElement("div");s.classList.add("ddcarousel-item"),s.setAttribute("data-slide",e),s.appendChild(this.slidesSource[e]),i.appendChild(s)}this.slides=document.querySelectorAll("".concat(this.containerName," .ddcarousel-item"))}},{key:"calculateStage",value:function(){var e,t=this.slides[0].style.width,i=parseInt(window.getComputedStyle(this.container).width);for(e=0;e<this.slides.length;e++)null==this.itemsPerPage?this.slides[e].style.width=i+"px":this.slides[e].style.width=i/this.itemsPerPage+"px",this.slidesHeights.push(document.querySelector("".concat(this.containerName,' [data-slide="').concat(e,'"] > div')).scrollHeight);this.autoHeight&&this.calculateContainerHeight(this.currentSlide),this.slideToPosition(this.getCurrentSlideDom()),t!=this.slides[0].style.width&&this.triggerHandler("resized")}},{key:"createNav",value:function(){if(this.nav){var e=document.createElement("div"),t=document.createElement("button"),i=document.createElement("button");e.classList.add("ddcarousel-nav"),t.classList.add("ddcarousel-prev"),t.innerHTML=this.labelNavPrev,i.classList.add("ddcarousel-next"),i.innerHTML=this.labelNavNext,e.appendChild(t),e.appendChild(i),this.container.appendChild(e),this.navPrevBtn=document.querySelector("".concat(this.containerName," .").concat(t.classList[0])),this.navNextBtn=document.querySelector("".concat(this.containerName," .").concat(i.classList[0]))}}},{key:"createDots",value:function(){var t=this;if(this.dots){var e,i,s,n=document.createElement("div");for(n.classList.add("ddcarousel-dots"),s=1<this.itemsPerPage?this.slides.length-this.itemsPerPage+1:this.slides.length,e=0;e<s;e++)(i=document.createElement("button")).classList.add("ddcarousel-dot"),i.setAttribute("data-slide",e),i.addEventListener("click",function(e){return t.changeSlide(parseInt(e.target.getAttribute("data-slide")))}),n.appendChild(i);this.container.appendChild(n)}}},{key:"attachEvents",value:function(){var e=this;this.nav&&(this.navPrevBtn.addEventListener("click",function(){return e.prevSlide()}),this.navNextBtn.addEventListener("click",function(){return e.nextSlide()}),this.on("changed",function(){e.refreshNav()})),this.responsive&&window.addEventListener("resize",function(){e.calculateStage()}),this.attachTouchEvents()}},{key:"attachTouchEvents",value:function(){var i,s,n,t,a,r,c,o=this,e=[],l=[],d=[];this.touch&&(e.push("touchstart"),l.push("touchmove"),d.push("touchend")),this.touchMouse&&(e.push("mousedown"),l.push("mousemove"),d.push("mouseup")),e.forEach(function(e){o.stage.addEventListener(e,function(e){c=!0,s="mousedown"==e.type||"mousedown"==e.type&&o.touchMouse?e.clientX:e.targetTouches[0].clientX,i="mousedown"==e.type||"mousedown"==e.type&&o.touchMouse?e.clientX+-o.currentTranslate:e.targetTouches[0].clientX+-o.currentTranslate,t=o.currentTranslate,r=!1,o.triggerHandler("drag")},{passive:!0})}),d.forEach(function(e){o.stage.addEventListener(e,function(){o.triggerHandler("dragged"),a>=o.touchSwipeThreshold&&!r?t<n?o.prevSlide():o.nextSlide():o.stage.style.transform="translateX("+t+"px)",o.stage.style.transitionDuration=o.slideChangeDuration+"s",c=!1})}),l.forEach(function(e){o.stage.addEventListener(e,function(e){var t;"mousemove"==e.type&&o.touchMouse?c&&(t=e.clientX):"touchmove"==e.type&&(t=e.targetTouches[0].pageX),o.stage.style.transitionDuration=o.swipeSmooth+"s",a=Math.abs(t-s),n=t-i,a<=o.touchMaxSlideDist?o.stage.style.transform="translateX("+n+"px)":(r=!0,n=t-i)},{passive:!0})})}},{key:"refreshNav",value:function(){0==this.currentSlide?this.navPrevBtn.classList.add("inactive"):this.currentSlide===this.slides.length-1||this.currentSlide==this.slideDiff?this.navNextBtn.classList.add("inactive"):0<this.currentSlide&&this.currentSlide<this.slides.length&&(this.navPrevBtn.classList.remove("inactive"),this.navNextBtn.classList.remove("inactive"))}},{key:"slideToPosition",value:function(e){this.currentTranslate=-(e.getBoundingClientRect().left-this.stage.getBoundingClientRect().left),this.stage.style.transform="translateX(".concat(this.currentTranslate,"px)")}},{key:"calculateContainerHeight",value:function(){if(1==this.itemsPerPage)this.container.style.height=this.slidesHeights[this.currentSlide]+"px";else{var e,t=[];for(e=this.currentSlide;e<=this.currentSlide+this.itemsPerPage-1;e++)t.push(this.slidesHeights[e]),this.container.style.height=Math.max.apply(Math,t)+"px"}}},{key:"changeSlide",value:function(e){var t=this.currentSlide;this.stage.style.transitionDuration=this.slideChangeDuration+"s",this.dots&&document.querySelector("".concat(this.containerName,' .ddcarousel-dot[data-slide="').concat(this.currentSlide,'"]')).classList.remove("active"),this.getSlideDom(this.currentSlide).classList.remove("active"),"prev"==e?this.currentSlide--:"next"==e?this.currentSlide++:Number.isInteger(e)&&(this.currentSlide=e),this.slideDiff=this.slides.length-this.itemsPerPage,1<this.itemsPerPage&&this.currentSlide>=this.slideDiff?this.currentSlide=this.slideDiff:this.currentSlide>=this.slides.length?this.currentSlide=this.slides.length-1:this.currentSlide<0&&(this.currentSlide=0),this.slideToPosition(this.getCurrentSlideDom()),this.getSlideDom(this.currentSlide).classList.add("active"),this.dots&&document.querySelector("".concat(this.containerName,' .ddcarousel-dot[data-slide="').concat(this.currentSlide,'"]')).classList.add("active"),this.autoHeight&&this.calculateContainerHeight(this.getCurrentSlideDom()),t!=this.currentSlide&&this.triggerHandler("changed")}},{key:"nextSlide",value:function(){this.changeSlide("next")}},{key:"prevSlide",value:function(){this.changeSlide("prev")}},{key:"getCurrentSlide",value:function(){return this.currentSlide}},{key:"getCurrentSlideDom",value:function(){return document.querySelector("".concat(this.containerName,' [data-slide="').concat(this.currentSlide,'"]'))}},{key:"getCurrentPage",value:function(){return document.querySelector("".concat(this.containerName,' [data-slide="').concat(this.currentSlide,'"].active')).getAttribute("data-slide")}},{key:"getTotalSlides",value:function(){return this.slides.length}},{key:"getSlideDom",value:function(e){return document.querySelector("".concat(this.containerName,' .ddcarousel-item[data-slide="').concat(e,'"]'))}}]),w}();